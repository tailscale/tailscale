# systemd drop-in for tailscaled HTTP proxy configuration
# 
# Installation:
#   sudo cp tailscaled-proxy.conf /etc/systemd/system/tailscaled.service.d/proxy.conf
#   sudo systemctl daemon-reload
#   sudo systemctl restart tailscaled
#
# This configures tailscaled to use Tor's HTTPTunnelPort for all HTTP/HTTPS requests
# enabling stock Tailscale to connect to Headscale control servers via .onion addresses

[Service]
Environment=HTTP_PROXY=http://127.0.0.1:9152
Environment=HTTPS_PROXY=http://127.0.0.1:9152
Environment=NO_PROXY=localhost,127.0.0.1